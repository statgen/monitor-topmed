   Notes on updating Topmed source tree in production

on my machine
git pull

if removed something, do
git rm file
git -m "why did you remove this" commit

Commit anything else you need do in GitHub/Desktop
Sync to master

If you must merge code, be sure to sign into github as tgliedt, then the merge button will appear


ssh topmed
rm -rf ~/dev/monitor-topmed 
cd ~/dev
git clone https://github.com/statgen/monitor-topmed.git
cd ~/dev/monitor-topmed

mkdir -p /working/build
chmod 0775 /working/build
chgrp topmed-dev /working/build

d=/working/build/monitor-topmed
#   If you get errors in build do this, but it'll be lots longer:  rm -rf $d
rex build    # Puts build in $d

$d/scripts/schema.pl
#   Check if schemas are correct
ls -l $d/lib/perl5/Topmed/DB/Schema/Result

#   Install in production place with a different scheme?
#rex -E prod build
#rex -E prod install
#rex -E test install    # installed in /var/tmp/monitor   Does not work
rex install             # Builds to $d

#   Sanity check
#/var/tmp/monitor-topmed/bin/topmedcmd.pl
$d/bin/topmedcmd.pl

rsync -av * /usr/cluster/topmed
#   You must manually remove code which was deleted from git

