   Notes on updating Topmed source tree in production

on my machine
git pull

if removed something, do
git rm file
git -m "why did you remove this" commit

Commit anything else you need do in GitHub/Desktop
Sync to master

If you must merge code, be sure to sign into github as tgliedt, then the merge button will appear

#   PW=LsdI2HafPS

ssh topmed
cd ~/dev
#   If starting all over
  rm -rf ~/dev/monitor-topmed
  git clone git@github.com:statgen/monitor-topmed.git

#   Normal processing
cd ~/dev/monitor-topmed
git pull                # Not needed if starting over

mkdir -p /working/build
chmod 0775 /working/build
chgrp topmed-dev /working/build

#   Build locally.  If database changes were made, update schema
  rex schema
  git commit -m "DB changes" -a
  git push
Â  #   Update database information.  Check if schemas are correct
  ls -l $builddir/lib/perl5/Topmed/DB/Schema/Result

#   Normal build locally
builddir=/working/build/monitor-topmed
rex -E prod build

#   Install in production place with a different scheme?
rex -E prod install    # installed in /var/tmp/monitor



Copy prod-install to production to be used
rsync -av /var/tmp/monitor/* /usr/cluster/topmed

l